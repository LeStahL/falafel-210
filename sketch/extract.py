# Hardcyber - PC-64k-Intro by Team210 at Deadline 2k19
# Copyright (C) 2019  Alexander Kraus <nr4@z10.info>
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <https://www.gnu.org/licenses/>.

from svgpathtools import Path, Line
from svgpathtools import parse_path

path_string = 'M 10,10 l 10,0 0,10 -10,0 z M 20,10 l 10,0 0,10 -10,0 z M 30,10 l 10,0 0,10 -10,0 z M 40,10 l 10,0 0,10 -10,0 z M 50,10 l 10,0 0,10 -10,0 z M 60,10 l 10,0 0,10 -10,0 z M 70,10 l 10,0 0,10 -10,0 z M 100,10 l 10,0 0,10 -10,0 z M 160,10 l 10,0 0,10 -10,0 z M 170,10 l 10,0 0,10 -10,0 z M 190,10 l 10,0 0,10 -10,0 z M 200,10 l 10,0 0,10 -10,0 z M 210,10 l 10,0 0,10 -10,0 z M 220,10 l 10,0 0,10 -10,0 z M 230,10 l 10,0 0,10 -10,0 z M 240,10 l 10,0 0,10 -10,0 z M 250,10 l 10,0 0,10 -10,0 z M 10,20 l 10,0 0,10 -10,0 z M 70,20 l 10,0 0,10 -10,0 z M 90,20 l 10,0 0,10 -10,0 z M 100,20 l 10,0 0,10 -10,0 z M 120,20 l 10,0 0,10 -10,0 z M 130,20 l 10,0 0,10 -10,0 z M 140,20 l 10,0 0,10 -10,0 z M 150,20 l 10,0 0,10 -10,0 z M 160,20 l 10,0 0,10 -10,0 z M 170,20 l 10,0 0,10 -10,0 z M 190,20 l 10,0 0,10 -10,0 z M 250,20 l 10,0 0,10 -10,0 z M 10,30 l 10,0 0,10 -10,0 z M 30,30 l 10,0 0,10 -10,0 z M 40,30 l 10,0 0,10 -10,0 z M 50,30 l 10,0 0,10 -10,0 z M 70,30 l 10,0 0,10 -10,0 z M 100,30 l 10,0 0,10 -10,0 z M 110,30 l 10,0 0,10 -10,0 z M 120,30 l 10,0 0,10 -10,0 z M 190,30 l 10,0 0,10 -10,0 z M 210,30 l 10,0 0,10 -10,0 z M 220,30 l 10,0 0,10 -10,0 z M 230,30 l 10,0 0,10 -10,0 z M 250,30 l 10,0 0,10 -10,0 z M 10,40 l 10,0 0,10 -10,0 z M 30,40 l 10,0 0,10 -10,0 z M 40,40 l 10,0 0,10 -10,0 z M 50,40 l 10,0 0,10 -10,0 z M 70,40 l 10,0 0,10 -10,0 z M 90,40 l 10,0 0,10 -10,0 z M 100,40 l 10,0 0,10 -10,0 z M 120,40 l 10,0 0,10 -10,0 z M 140,40 l 10,0 0,10 -10,0 z M 150,40 l 10,0 0,10 -10,0 z M 160,40 l 10,0 0,10 -10,0 z M 170,40 l 10,0 0,10 -10,0 z M 190,40 l 10,0 0,10 -10,0 z M 210,40 l 10,0 0,10 -10,0 z M 220,40 l 10,0 0,10 -10,0 z M 230,40 l 10,0 0,10 -10,0 z M 250,40 l 10,0 0,10 -10,0 z M 10,50 l 10,0 0,10 -10,0 z M 30,50 l 10,0 0,10 -10,0 z M 40,50 l 10,0 0,10 -10,0 z M 50,50 l 10,0 0,10 -10,0 z M 70,50 l 10,0 0,10 -10,0 z M 110,50 l 10,0 0,10 -10,0 z M 130,50 l 10,0 0,10 -10,0 z M 150,50 l 10,0 0,10 -10,0 z M 190,50 l 10,0 0,10 -10,0 z M 210,50 l 10,0 0,10 -10,0 z M 220,50 l 10,0 0,10 -10,0 z M 230,50 l 10,0 0,10 -10,0 z M 250,50 l 10,0 0,10 -10,0 z M 10,60 l 10,0 0,10 -10,0 z M 70,60 l 10,0 0,10 -10,0 z M 90,60 l 10,0 0,10 -10,0 z M 110,60 l 10,0 0,10 -10,0 z M 160,60 l 10,0 0,10 -10,0 z M 170,60 l 10,0 0,10 -10,0 z M 190,60 l 10,0 0,10 -10,0 z M 250,60 l 10,0 0,10 -10,0 z M 10,70 l 10,0 0,10 -10,0 z M 20,70 l 10,0 0,10 -10,0 z M 30,70 l 10,0 0,10 -10,0 z M 40,70 l 10,0 0,10 -10,0 z M 50,70 l 10,0 0,10 -10,0 z M 60,70 l 10,0 0,10 -10,0 z M 70,70 l 10,0 0,10 -10,0 z M 90,70 l 10,0 0,10 -10,0 z M 110,70 l 10,0 0,10 -10,0 z M 130,70 l 10,0 0,10 -10,0 z M 150,70 l 10,0 0,10 -10,0 z M 170,70 l 10,0 0,10 -10,0 z M 190,70 l 10,0 0,10 -10,0 z M 200,70 l 10,0 0,10 -10,0 z M 210,70 l 10,0 0,10 -10,0 z M 220,70 l 10,0 0,10 -10,0 z M 230,70 l 10,0 0,10 -10,0 z M 240,70 l 10,0 0,10 -10,0 z M 250,70 l 10,0 0,10 -10,0 z M 130,80 l 10,0 0,10 -10,0 z M 150,80 l 10,0 0,10 -10,0 z M 10,90 l 10,0 0,10 -10,0 z M 20,90 l 10,0 0,10 -10,0 z M 30,90 l 10,0 0,10 -10,0 z M 40,90 l 10,0 0,10 -10,0 z M 50,90 l 10,0 0,10 -10,0 z M 70,90 l 10,0 0,10 -10,0 z M 80,90 l 10,0 0,10 -10,0 z M 90,90 l 10,0 0,10 -10,0 z M 100,90 l 10,0 0,10 -10,0 z M 110,90 l 10,0 0,10 -10,0 z M 130,90 l 10,0 0,10 -10,0 z M 150,90 l 10,0 0,10 -10,0 z M 160,90 l 10,0 0,10 -10,0 z M 170,90 l 10,0 0,10 -10,0 z M 180,90 l 10,0 0,10 -10,0 z M 200,90 l 10,0 0,10 -10,0 z M 220,90 l 10,0 0,10 -10,0 z M 240,90 l 10,0 0,10 -10,0 z M 20,100 l 10,0 0,10 -10,0 z M 100,100 l 10,0 0,10 -10,0 z M 140,100 l 10,0 0,10 -10,0 z M 150,100 l 10,0 0,10 -10,0 z M 200,100 l 10,0 0,10 -10,0 z M 240,100 l 10,0 0,10 -10,0 z M 30,110 l 10,0 0,10 -10,0 z M 40,110 l 10,0 0,10 -10,0 z M 70,110 l 10,0 0,10 -10,0 z M 80,110 l 10,0 0,10 -10,0 z M 90,110 l 10,0 0,10 -10,0 z M 100,110 l 10,0 0,10 -10,0 z M 120,110 l 10,0 0,10 -10,0 z M 130,110 l 10,0 0,10 -10,0 z M 140,110 l 10,0 0,10 -10,0 z M 160,110 l 10,0 0,10 -10,0 z M 170,110 l 10,0 0,10 -10,0 z M 210,110 l 10,0 0,10 -10,0 z M 220,110 l 10,0 0,10 -10,0 z M 240,110 l 10,0 0,10 -10,0 z M 250,110 l 10,0 0,10 -10,0 z M 20,120 l 10,0 0,10 -10,0 z M 40,120 l 10,0 0,10 -10,0 z M 50,120 l 10,0 0,10 -10,0 z M 60,120 l 10,0 0,10 -10,0 z M 80,120 l 10,0 0,10 -10,0 z M 100,120 l 10,0 0,10 -10,0 z M 110,120 l 10,0 0,10 -10,0 z M 120,120 l 10,0 0,10 -10,0 z M 170,120 l 10,0 0,10 -10,0 z M 180,120 l 10,0 0,10 -10,0 z M 190,120 l 10,0 0,10 -10,0 z M 250,120 l 10,0 0,10 -10,0 z M 10,130 l 10,0 0,10 -10,0 z M 30,130 l 10,0 0,10 -10,0 z M 60,130 l 10,0 0,10 -10,0 z M 70,130 l 10,0 0,10 -10,0 z M 90,130 l 10,0 0,10 -10,0 z M 100,130 l 10,0 0,10 -10,0 z M 120,130 l 10,0 0,10 -10,0 z M 150,130 l 10,0 0,10 -10,0 z M 180,130 l 10,0 0,10 -10,0 z M 190,130 l 10,0 0,10 -10,0 z M 210,130 l 10,0 0,10 -10,0 z M 230,130 l 10,0 0,10 -10,0 z M 240,130 l 10,0 0,10 -10,0 z M 250,130 l 10,0 0,10 -10,0 z M 10,140 l 10,0 0,10 -10,0 z M 20,140 l 10,0 0,10 -10,0 z M 40,140 l 10,0 0,10 -10,0 z M 50,140 l 10,0 0,10 -10,0 z M 80,140 l 10,0 0,10 -10,0 z M 90,140 l 10,0 0,10 -10,0 z M 100,140 l 10,0 0,10 -10,0 z M 110,140 l 10,0 0,10 -10,0 z M 130,140 l 10,0 0,10 -10,0 z M 180,140 l 10,0 0,10 -10,0 z M 200,140 l 10,0 0,10 -10,0 z M 220,140 l 10,0 0,10 -10,0 z M 240,140 l 10,0 0,10 -10,0 z M 10,150 l 10,0 0,10 -10,0 z M 70,150 l 10,0 0,10 -10,0 z M 90,150 l 10,0 0,10 -10,0 z M 140,150 l 10,0 0,10 -10,0 z M 150,150 l 10,0 0,10 -10,0 z M 160,150 l 10,0 0,10 -10,0 z M 170,150 l 10,0 0,10 -10,0 z M 180,150 l 10,0 0,10 -10,0 z M 190,150 l 10,0 0,10 -10,0 z M 200,150 l 10,0 0,10 -10,0 z M 210,150 l 10,0 0,10 -10,0 z M 220,150 l 10,0 0,10 -10,0 z M 240,150 l 10,0 0,10 -10,0 z M 250,150 l 10,0 0,10 -10,0 z M 10,160 l 10,0 0,10 -10,0 z M 30,160 l 10,0 0,10 -10,0 z M 50,160 l 10,0 0,10 -10,0 z M 60,160 l 10,0 0,10 -10,0 z M 100,160 l 10,0 0,10 -10,0 z M 130,160 l 10,0 0,10 -10,0 z M 150,160 l 10,0 0,10 -10,0 z M 160,160 l 10,0 0,10 -10,0 z M 190,160 l 10,0 0,10 -10,0 z M 200,160 l 10,0 0,10 -10,0 z M 210,160 l 10,0 0,10 -10,0 z M 250,160 l 10,0 0,10 -10,0 z M 10,170 l 10,0 0,10 -10,0 z M 50,170 l 10,0 0,10 -10,0 z M 70,170 l 10,0 0,10 -10,0 z M 90,170 l 10,0 0,10 -10,0 z M 110,170 l 10,0 0,10 -10,0 z M 130,170 l 10,0 0,10 -10,0 z M 140,170 l 10,0 0,10 -10,0 z M 150,170 l 10,0 0,10 -10,0 z M 170,170 l 10,0 0,10 -10,0 z M 180,170 l 10,0 0,10 -10,0 z M 190,170 l 10,0 0,10 -10,0 z M 200,170 l 10,0 0,10 -10,0 z M 210,170 l 10,0 0,10 -10,0 z M 230,170 l 10,0 0,10 -10,0 z M 90,180 l 10,0 0,10 -10,0 z M 100,180 l 10,0 0,10 -10,0 z M 110,180 l 10,0 0,10 -10,0 z M 150,180 l 10,0 0,10 -10,0 z M 170,180 l 10,0 0,10 -10,0 z M 210,180 l 10,0 0,10 -10,0 z M 220,180 l 10,0 0,10 -10,0 z M 10,190 l 10,0 0,10 -10,0 z M 20,190 l 10,0 0,10 -10,0 z M 30,190 l 10,0 0,10 -10,0 z M 40,190 l 10,0 0,10 -10,0 z M 50,190 l 10,0 0,10 -10,0 z M 60,190 l 10,0 0,10 -10,0 z M 70,190 l 10,0 0,10 -10,0 z M 90,190 l 10,0 0,10 -10,0 z M 120,190 l 10,0 0,10 -10,0 z M 130,190 l 10,0 0,10 -10,0 z M 140,190 l 10,0 0,10 -10,0 z M 170,190 l 10,0 0,10 -10,0 z M 190,190 l 10,0 0,10 -10,0 z M 210,190 l 10,0 0,10 -10,0 z M 230,190 l 10,0 0,10 -10,0 z M 240,190 l 10,0 0,10 -10,0 z M 250,190 l 10,0 0,10 -10,0 z M 10,200 l 10,0 0,10 -10,0 z M 70,200 l 10,0 0,10 -10,0 z M 100,200 l 10,0 0,10 -10,0 z M 120,200 l 10,0 0,10 -10,0 z M 150,200 l 10,0 0,10 -10,0 z M 170,200 l 10,0 0,10 -10,0 z M 210,200 l 10,0 0,10 -10,0 z M 220,200 l 10,0 0,10 -10,0 z M 10,210 l 10,0 0,10 -10,0 z M 30,210 l 10,0 0,10 -10,0 z M 40,210 l 10,0 0,10 -10,0 z M 50,210 l 10,0 0,10 -10,0 z M 70,210 l 10,0 0,10 -10,0 z M 90,210 l 10,0 0,10 -10,0 z M 110,210 l 10,0 0,10 -10,0 z M 120,210 l 10,0 0,10 -10,0 z M 160,210 l 10,0 0,10 -10,0 z M 170,210 l 10,0 0,10 -10,0 z M 180,210 l 10,0 0,10 -10,0 z M 190,210 l 10,0 0,10 -10,0 z M 200,210 l 10,0 0,10 -10,0 z M 210,210 l 10,0 0,10 -10,0 z M 230,210 l 10,0 0,10 -10,0 z M 240,210 l 10,0 0,10 -10,0 z M 250,210 l 10,0 0,10 -10,0 z M 10,220 l 10,0 0,10 -10,0 z M 30,220 l 10,0 0,10 -10,0 z M 40,220 l 10,0 0,10 -10,0 z M 50,220 l 10,0 0,10 -10,0 z M 70,220 l 10,0 0,10 -10,0 z M 90,220 l 10,0 0,10 -10,0 z M 100,220 l 10,0 0,10 -10,0 z M 110,220 l 10,0 0,10 -10,0 z M 130,220 l 10,0 0,10 -10,0 z M 140,220 l 10,0 0,10 -10,0 z M 160,220 l 10,0 0,10 -10,0 z M 190,220 l 10,0 0,10 -10,0 z M 210,220 l 10,0 0,10 -10,0 z M 220,220 l 10,0 0,10 -10,0 z M 230,220 l 10,0 0,10 -10,0 z M 240,220 l 10,0 0,10 -10,0 z M 250,220 l 10,0 0,10 -10,0 z M 10,230 l 10,0 0,10 -10,0 z M 30,230 l 10,0 0,10 -10,0 z M 40,230 l 10,0 0,10 -10,0 z M 50,230 l 10,0 0,10 -10,0 z M 70,230 l 10,0 0,10 -10,0 z M 90,230 l 10,0 0,10 -10,0 z M 100,230 l 10,0 0,10 -10,0 z M 140,230 l 10,0 0,10 -10,0 z M 150,230 l 10,0 0,10 -10,0 z M 170,230 l 10,0 0,10 -10,0 z M 220,230 l 10,0 0,10 -10,0 z M 230,230 l 10,0 0,10 -10,0 z M 250,230 l 10,0 0,10 -10,0 z M 10,240 l 10,0 0,10 -10,0 z M 70,240 l 10,0 0,10 -10,0 z M 90,240 l 10,0 0,10 -10,0 z M 100,240 l 10,0 0,10 -10,0 z M 130,240 l 10,0 0,10 -10,0 z M 140,240 l 10,0 0,10 -10,0 z M 160,240 l 10,0 0,10 -10,0 z M 170,240 l 10,0 0,10 -10,0 z M 180,240 l 10,0 0,10 -10,0 z M 200,240 l 10,0 0,10 -10,0 z M 210,240 l 10,0 0,10 -10,0 z M 220,240 l 10,0 0,10 -10,0 z M 250,240 l 10,0 0,10 -10,0 z M 10,250 l 10,0 0,10 -10,0 z M 20,250 l 10,0 0,10 -10,0 z M 30,250 l 10,0 0,10 -10,0 z M 40,250 l 10,0 0,10 -10,0 z M 50,250 l 10,0 0,10 -10,0 z M 60,250 l 10,0 0,10 -10,0 z M 70,250 l 10,0 0,10 -10,0 z M 90,250 l 10,0 0,10 -10,0 z M 110,250 l 10,0 0,10 -10,0 z M 130,250 l 10,0 0,10 -10,0 z M 150,250 l 10,0 0,10 -10,0 z M 200,250 l 10,0 0,10 -10,0 z M 210,250 l 10,0 0,10 -10,0 z M 220,250 l 10,0 0,10 -10,0 z M 230,250 l 10,0 0,10 -10,0 z M 240,250 l 10,0 0,10 -10,0 z M 250,250 l 10,0 0,10 -10,0 z '

path = parse_path(path_string)

# find dimensions
xmax = -1.e9
xmin = 1.e9
ymax = -1.e9
ymin = 1.e9
for line in path:
    xmax = max(xmax, line.start.real)
    xmax = max(xmax, line.end.real)
    
    xmin = min(xmin, line.start.real)
    xmin = min(xmin, line.end.real)
    
    ymax = max(ymax, line.start.imag)
    ymax = max(ymax, line.end.imag)
    
    ymin = min(ymin, line.start.imag)
    ymin = min(ymin, line.end.imag)

# rescale path
for i in range(len(path)):
    path[i].start -= complex(xmin,ymin)
    path[i].start = complex(path[i].start.real/abs(xmax-xmin), path[i].start.imag/abs(ymax-ymin)/100.*29.)
    path[i].start -= complex(.5,.5*29./100.)
    path[i].start = complex(path[i].start.real,-path[i].start.imag)
    
    path[i].end -= complex(xmin,ymin)
    path[i].end = complex(path[i].end.real/abs(xmax-xmin), path[i].end.imag/abs(ymax-ymin)/100.*29.)
    path[i].end -= complex(.5,.5*29./100.)
    path[i].end = complex(path[i].end.real,-path[i].end.imag)

# sort path
#newpath = [ path[0] ]
#del path[0]
#while len(path) > 1:
    #print(len(path))
    #for j in range(len(path)-1):
        #print(j,"/",len(path))
        #if abs(newpath[-1].end - path[j].start)<5.e-1:
            #newpath += [ path[j] ]
            #del path[j]
            #break
#path = newpath
    
with open('5711.frag', 'wt') as f:
    f.write('const int npts = ' + str(4*len(path)) + ';\n')
    f.write('const float path[npts] = float[npts](')
    
    for i in range(len(path)-1):
        line = path[i]
        f.write('{:.3f}'.format(line.start.real) + ',' + '{:.3f}'.format(line.start.imag) + ',')
        f.write('{:.3f}'.format(line.end.real) + ',' + '{:.3f}'.format(line.end.imag) + ',')
    line = path[-1]
    f.write('{:.3f}'.format(line.start.real) + ',' + '{:.3f}'.format(line.start.imag) + ',')
    f.write('{:.3f}'.format(line.end.real) + ',' + '{:.3f}'.format(line.end.imag))
    f.write(');\n')
    f.close()
